# ==============================================================
# Server
# ==============================================================
server.port=${SERVER_PORT:8080}

# ==============================================================
# Database (PostgreSQL)
# ==============================================================
# Default: db (Docker Compose network) -> jdbc:postgresql://db:5432/moviebooking
# On VM: override SPRING_DATASOURCE_URL (e.g. jdbc:postgresql://localhost:5432/moviebooking)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://db:5432/moviebooking}
spring.datasource.username=${POSTGRES_USER:postgres}
spring.datasource.password=${POSTGRES_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:validate}
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# Recommended timezone handling (optional but nice for prod)
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# ==============================================================
# Security / JWT / OAuth2
# ==============================================================
# JWT Secret
jwt.secret=${JWT_SECRET}

# Google OAuth2
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}

# If you use redirect-uri, you can param it as well (optional)
# spring.security.oauth2.client.registration.google.redirect-uri=${GOOGLE_REDIRECT_URI:http://localhost:8080/login/oauth2/code/google}

# ==============================================================
# Redis
# ==============================================================
spring.data.redis.host=${SPRING_DATA_REDIS_HOST:redis}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}
spring.data.redis.timeout=${SPRING_DATA_REDIS_TIMEOUT:60000}

# ==============================================================
# Seat Lock / Booking Config
# ==============================================================
seat.lock.duration.minutes=${SEAT_LOCK_DURATION_MINUTES:10}
seat.lock.max-seats-per-booking=${SEAT_LOCK_MAX_SEATS_PER_BOOKING:10}

# Payment Timeout
payment.timeout.minutes=${PAYMENT_TIMEOUT_MINUTES:17}

# ==============================================================
# Payment - PayPal
# ==============================================================
paypal.client.id=${PAYPAL_CLIENT_ID}
paypal.client.secret=${PAYPAL_CLIENT_SECRET}
paypal.mode=${PAYPAL_MODE:sandbox}

# These URLs are environment-dependent; override via env in VM if needed
paypal.return.url=${PAYPAL_RETURN_URL:https://movie-booking-frontend-9nbi.vercel.app/payment/success?method=PAYPAL}
paypal.cancel.url=${PAYPAL_CANCEL_URL:https://movie-booking-frontend-9nbi.vercel.app/payment/cancel}

# ==============================================================
# Payment - MoMo
# ==============================================================
momo.partner.code=${MOMO_PARTNER_CODE}
momo.access.key=${MOMO_ACCESS_KEY}
momo.secret.key=${MOMO_SECRET_KEY}
momo.api.endpoint=${MOMO_API_ENDPOINT:https://test-payment.momo.vn/v2/gateway/api}

# Same idea: override these in prod if you have public domain / ngrok
momo.return.url=${MOMO_RETURN_URL:https://movie-booking-frontend-9nbi.vercel.app/payment/success?method=MOMO}
momo.ipn.url=${MOMO_IPN_URL:https://4-194-140-32.nip.io/payments/momo/ipn}

# ==============================================================
# Currency / Exchange
# ==============================================================
currency.default=${CURRENCY_DEFAULT:VND}
currency.exchange.api=${CURRENCY_EXCHANGE_API:https://latest.currency-api.pages.dev/v1/currencies}
currency.exchange.cache-ttl-seconds=${CURRENCY_EXCHANGE_CACHE_TTL_SECONDS:900}
payment.paypal.currency=${PAYMENT_PAYPAL_CURRENCY:USD}

# ==============================================================
# Actuator / Prometheus
# ==============================================================
# Expose only needed endpoints in prod
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.show-details=never
management.endpoint.health.probes.enabled=true

# Prometheus scrapes /actuator/prometheus
management.prometheus.metrics.export.enabled=true

# ==============================================================
# Logging (optional tuning for prod)
# ==============================================================
logging.level.root=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=INFO


frontend.redirect.url=${FRONTEND_REDIRECT_URL:http://localhost:5173/oauth2/success}
frontend.base.url=${FRONTEND_BASE_URL:http://localhost:5173}